---
layout: post
date: 2019-07-22 01:00:00
categories: Kubernetes
title: "Bugle - Container Log to WebPage"
draft: true
---


Frequently I get asked "What is the best strategy to  enable access to the logs of container pods without giving access to kubernetes?". The obvious answer is log forwarding to a central location e.g. Splunk. However because of the cost of platforms like Splunk many organizations choose not to use it in Dev, or atleast not straight away.

Bugle aims to bridge the gap.

Bugle is a container that runs in kubernetes and allows access to the log of a single other container via a HTTP request. Multiple instances can be run if multiple container logs are required.

Bugle works by calling the kubernetes API to access the logs on demand. The user initiates a request via HTTP and this triggers the Bugle Go application running in the Bugle container. The log is then returned to the HTTP requestor.


The common way of doing this is by using a sidecar in same pod. This sidecar takes the logs that must be written to disk and forwards them on. Bugle is has many advantages over this.
1. Bugle does not require modifying the original POD
2. Bugle does not require the orginal application to store the logs to disk. This is sometimes not possible
3. Bugle can be deployed as and when needed with no prior planning.

Bugle is deployed with helm and must have the following helm values set.


```yaml
params:
  namespace: default #Namespace of the target pod in
  podname: kubernetes-bootcamp-6bf84cb898-hsg6w #Name of the target pod
  username: unset #Credentials to secure webpage showing the log. If either of these are set to 'unset' then there is no challenge.
  password: unset
```

In addition the ingress should be customised to meet your needs.

In order to add a very basic securty level a username and password can be hard coded in the helm config. If this is set then users must provide this username and password over basic auth.

To use ensure your kubeconfig is correct and helm is installed locally and initialied in the kubernetes cluster.

1. `git clone https://github.com/ChrisPhillips-cminion/Bugle`
2. Modify the values file in the helm directory to meet your needs
3. `helm install --name <podnamne>-logger helm`


**Notes:**
1. The webpage does not auto refresh.
2. A kubernetes service account is created for each deployment that gives the Bugle pod view access to pods in the desired namepsace.
